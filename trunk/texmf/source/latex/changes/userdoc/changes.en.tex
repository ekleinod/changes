%^^A ---- introduction
\section{Introduction}

This package provides means for manual change markup.

Any comments, thoughts or improvements are welcome.
The package is maintained at \emph{sourceforge}, please see

\input{userdoc/url}

for source code access, bug and feature tracker, forum etc.
If you want to contact me directly, please send an email to \input{userdoc/email}.
Please start your email subject with \texttt{[changes]}.

\begin{quote}
	\small\textsc{README:}
	The changes-package allows the user to manually markup changes of text, such as additions, deletions, or replacements.
	Changed text is shown in a different color; deleted text is striked out.
	The package allows free definition of additional authors and their associated color.
	It also allows you to change the markup of changes, authors, or annotations.
\end{quote}


%^^A ---- usage
\section{Using the \chpackage{changes}-package}
\label{sec:usage}

In this section a typical use case of the \chpackage{changes}-package is described.
You can find the detailed description of the package options and new commands in \autoref{sec:user}.

We start with the text you want to change.
You want to markup the changes for each author individually.
Such a change markup is well-known in WYSIWYG text processors such as \emph{LibreOffice}, \emph{OpenOffice}, or \emph{Word}.

The \chpackage{changes}-package was developed in order to support such change markup.
The package provides commands for defining authors, and for marking text as added, deleted, or replaced.
In order to use the package, you have to follow these steps:

\begin{enumerate}
	\item use \chpackage{changes}-package
	\item define authors
	\item markup text changes
	\item typeset the document with \LaTeX
	\item output list of changes
	\item remove markup
\end{enumerate}


\minisec{use \chpackage{changes}-package}

In order to activate change management, use the \chpackage{changes}-package as follows:

\chcommand{usepackage\{changes\}}

resp.

\chcommand{usepackage[<options>]\{changes\}}

You can use the options for defining the layout of the change markup.
You can change the layout after using the \chpackage{changes}-package as well.

For detailed information please refer to \autoref{sec:user:options} and \autoref{sec:user:customizingoutput}.


\minisec{define authors}

The \chpackage{changes}-package provides a defualt anonymous author.
If you want to track your changes per author,you have to define the needed authors as follows:

\chcommand{definechangesauthor[<options>]\{id\}}

Every author is uniquely identified through it's his or her id.
You can give evry author an optional name and/or color.

For detailed information please refer to \autoref{sec:user:authormanagement}.


\minisec{markup text changes}

Noew everything is set to markup the changed text.
Please use the following commands according to your change:

for newly added text:\\
\chcommand{added[<id>][<remark>]\{text\}}

for deleted text:\\
\chcommand{deleted[<id>][<remark>]\{text\}}

for replaced text:\\
\chcommand{replaced[<id>][<remark>]\{text\}}

Stating the author's id and/or a remark is optional.

For detailed information please refer to \autoref{sec:user:changemanagement}.


\minisec{typeset the document with \LaTeX}

After marking your changes in the text you are able to display them in the generated document by processing it as usual with \LaTeX.
By processing your document the changed text is layouted as you stated by the corresponding options and/or special commands.

\minisec{output list of changes}

You can print a list of changes using:

\chcommand{listofchanges}

The list is meant to be the analogon to the list of tables, or the list of figures.
It provides a quick overview of the number and kind of changes of every author.

By runnning \LaTeX\ the data of the list is written into an auxiliary file.
This data is used in the next \LaTeX\ run for typesetting the list of changes.
Therefore, two \LaTeX\ runs are needed after every change in order to typeset an up-to-date list of changes.


\minisec{remove markup}

Often you want to remove the change markup after acknowledging or rejecting the changes.
You can suppress the output of changes with:

\input{userdoc/option_final}

In order to remove the markup from the \LaTeX\ source code  you can use a script from Silvano Chiaradonna.
You find the script in the directory:

\input{userdoc/path_scripts}

The script removes all markups.
It is not possible to select the markup to remove.

%^^A ---- limitations
\section{Limitations and possible enhancements}
\label{sec:limitations}

The \chpackage{changes}-package was carefully programmed and tested.
Yet the exists the possibility of errors in the package, problems in the usage, or missing functions you would like to have.
In that case, please go to

\input{userdoc/url.tex}

There you can report errors, ask for help in the forum, or give advice to other users.
You can view the source code, and change it according to your needs.
I will try to include your changes in the maintained package.
If you are a registered \emph{sourceforge} user you can be a co-author of the \chpackage{changes}-package.

You can write me an email too, please send it to \input{userdoc/email}.
In that case, please start your email subject with \texttt{[changes]}.

Change markup of texts works well, it is possible to markup whole paragraphs.
You cannot markup more than one paragraph at a time.
You cannot markup figures or tables as well.

There is a problem of typesetting footnotes in special environments, such as tables or tabbings.
Since footnotes are the default markup of remarks, this would be a problem.
You can solve this problem by defining another annotation of remarks.

There are several possibilities of enhancing the \chpackage{changes}-package.
I will describe but a few here, I will not implement them due to time and/or skill lacks.
You can have a look at the more complete list of enhancements on the \emph{sourceforge} page.

\begin{itemize}
	\item selecting of acknowledged and rejected texts; deletion of the corresponding markup
	\item markup of more than one paragraph
	\item markup of figures and tables
	\item automatic markup based on diff information (with regard to the limitations, such as markup of paragraphs, figures etc.)
	\item translation of language dependent texts and the user documentation in other languages
\end{itemize}


%^^A ---- user interface
\section{User interface of the \chpackage{changes}-package}
\label{sec:user}

This section describes the user interface of the \chpackage{changes}-package, i.e. all options and commands of the package.
Every option resp. new command is described.
If you want to see the options and commands in action, please refer to the examples in

\input{userdoc/path_examples}

The example files are named with the used option resp. command.

A preliminary remark regarding typesetting of replaced text: replaced text is always typeset as follows: \meta{new text}\meta{old text}.
Thus, there is no possiblity to influence the output of replaced text directly, but via changing the output of added resp. deleted text.


%^^A -- options
\subsection{Package Options}
\label{sec:user:options}

\subsubsection{draft}

The \choption{draft}-option enables markup of changes.
The list of changes is available via \chcommand{listofchanges}.
This option is the default option, if no other option is selected.

The \chpackage{changes} package reuses the declaration of \choption{draft} in \chcommand{documentclass}.
The local declaration of \choption{final} overrules the declaration of \choption{draft} in \chcommand{documentclass}.

\input{userdoc/option_draft}

\subsubsection{final}
The \choption{final}-option disables markup of changes, only the correct text will be shown.
The list of changes is disabled, too.

The \chpackage{changes} package reuses the declaration of \choption{final} in \chcommand{documentclass}.
The local declaration of \choption{draft} overrules the declaration of \choption{final} in \chcommand{documentclass}.

\input{userdoc/option_final}


\subsubsection{markup}

The \choption{markup} option chooses a predefined visual markup of changed text.
The default markup is chosen if no explicit markup is given.
The markup chosen with \choption{markup} can be overwritten with the more special markup options \choption{addedmarkup} and/or \choption{deletedmarkup}.

The following values are allowed:
\begin{description}
	\item [\choption{default}] colored markup of added text, striked out for deleted text (default markup)
	\item [\choption{underlined}] underlined for added text, striked out for deleted text
	\item [\choption{bfit}] bold added text, italic deleted text
	\item [\choption{nocolor}] no colored markup, underlined for added text, striked out for deleted text
\end{description}

\input{userdoc/option_markup}

\subsubsection{addedmarkup, deletedmarkup}

The \choption{addedmarkup} option chooses a predefined visual markup of added text.
The \choption{deletedmarkup} option chooses a predefined visual markup of deleted text respectively.
The default markup is chosen if no explicit markup is given.
The options \choption{addedmarkup} and \choption{deletedmarkup} overwrite the markup chosen with \choption{markup}.

The following values are allowed:
\begin{description}
	\item [\choption{none}] no markup -- example (default markup for added text)
	\item [\choption{uline}] underlined text -- \uline{example}
	\item [\choption{uuline}] double underlined text -- \uuline{example}
	\item [\choption{uwave}] wavy underlined text -- \uwave{example}
	\item [\choption{dashuline}] dashed underlined text -- \dashuline{example}
	\item [\choption{dotuline}] dotted underlined text -- \dotuline{example}
	\item [\choption{sout}] striked out text -- \sout{example} (default markup for deleted text)
	\item [\choption{xout}] crossed out text -- \xout{example}
	\item [\choption{bf}] bold text -- \textbf{example}
	\item [\choption{it}] italic text -- \textit{example}
	\item [\choption{sl}] slanted text -- \textsl{example}
	\item [\choption{em}] emphasized text -- \emph{example}
\end{description}

\input{userdoc/option_addedmarkup}
\input{userdoc/option_deletedmarkup}


\subsubsection{authormarkup}

The \choption{authormarkup} option chooses a predefined visual markup of the author's identification.
The default markup is chosen if no explicit markup is given.

The following values are allowed:
\begin{description}
	\item [\choption{superscript}] superscripted text -- text\textsuperscript{author} (default markup)
	\item [\choption{subscript}] subscripted text -- text\textsubscript{author}
	\item [\choption{brackets}] text in brackets -- text(author)
	\item [\choption{footnote}] text in footnote -- text\footnote{author}
\end{description}

\input{userdoc/option_authormarkup}


\subsubsection{authormarkupposition}

The \choption{authormarkupposition} option chooses the position of the author's identification.
The default value is chosen if no explicit markup is given.

The following values are allowed:
\begin{description}
	\item [\choption{right}] right of the text -- text\textsuperscript{example} (default value)
	\item [\choption{left}] left of the text -- \textsuperscript{example}text
\end{description}

\input{userdoc/option_authormarkupposition}


\subsubsection{authormarkuptext}

The \choption{authormarkuptext} option chooses the text that is used for the author's identification.
The default value is chosen if no explicit markup is given.

The following values are allowed:
\begin{description}
	\item [\choption{id}] author's id -- text\textsuperscript{id} (default value)
	\item [\choption{name}] author's name -- text\textsuperscript{authorname}
\end{description}

\input{userdoc/option_authormarkuptext}


\subsubsection{ulem}

All options for the \chpackage{ulem} package can be specified as parameters of the \choption{ulem}-option.
Two or more options have to be embraced in curly brackets.

\input{userdoc/option_ulem}


\subsubsection{xcolor}

All options for the \chpackage{xcolor} package can be specified as parameters of the \choption{xcolor}-option.
Two or more option have to be embraced in curly brackets.

\input{userdoc/option_xcolor}


%^^A -- Change management ----------------------------------------------------------
\subsection{Change management}
\label{sec:user:changemanagement}

\subsubsection{\chcommand{added}}
\DescribeMacro{\added}

The command \chcommand{added} marks new text.
The new text is the mandatory argument for the command, thus it is written in curly braces.
There are two optional arguments: author-id and remark.
The author-id has to be defined using \chcommand{definechangesauthor}.
Use an empty author for an anonymous remark.

\begin{chusage}
		\>\chcommand{added[\meta{author's id}][\meta{remark}]\{\meta{new text}\}}\\
	\usageexample
		\>\texttt{This is \chcommand{added}[EK]\{new\} text.}\\
		\>This is \added[EK]{new} text.\\
		\>\texttt{This is \chcommand{added}[EK][has to be in it]\{new\} text.}\\
		\>This is \added[EK][has to be in it]{new} text.\\
		\>\texttt{This is \chcommand{added}[][anonymous]\{new\} text.}\\
		\>This is \added[][anonymous]{new} text.
\end{chusage}


\subsubsection{\chcommand{deleted}}
\DescribeMacro{\deleted}

The command \chcommand{deleted} marks deleted text.
For arguments see \chcommand{added}.

\begin{chusage}
		\>\chcommand{deleted[\meta{author's id}][\meta{remark}]\{\meta{deleted text}\}}\\
	\usageexample
		\>\texttt{This is \chcommand{deleted}[][obsolete]\{bad\} text.}\\
		\>This is \deleted[][obsolete]{bad} text.
\end{chusage}


\subsubsection{\chcommand{replaced}}
\DescribeMacro{\replaced}

The command \chcommand{replaced} marks replaced text.
Mandatory arguments are the new text and the old text.
For optional arguments see \chcommand{added}.

\begin{chusage}
		\>\chcommand{replaced[\meta{author's id}][\meta{remark}]\{\meta{new text}\}\{\meta{old text}\}}\\
	\usageexample
		\>\texttt{This is \chcommand{replaced}[EK]\{nice\}\{bad\} text.}\\
		\>This is \replaced[EK]{nice}{bad} text.
\end{chusage}



\subsubsection{\chcommand{listofchanges}}
\DescribeMacro{\listofchanges}

The command \chcommand{listofchanges} outputs a list of changes.
The first \LaTeX-run creates an auxiliary file, the second run uses the data of this file.
Therefore you need two \LaTeX-runs for an up-to-date list of changes.

\input{userdoc/command_listofchanges}


%^^A -- Author management -----------------------------------------------------
\subsection{Author management}
\label{sec:user:authormanagement}

\subsubsection{\chcommand{definechangesauthor}}
\DescribeMacro{\definechangesauthor}

The command \chcommand{definechangesauthor} defines a new author for changes.
You have to define a unique author's id, special characters or spaces are not allowed within the author's id.
You may define a corresponding color and the author's name.
If you do not define a color, black is used.
The author's name is used in the list of changes and in the markup, if you set the corresponding option.

\input{userdoc/command_definechangesauthor}


%^^A -- Adaptation of the output -----------------------------------------------------
\subsection{Adaptation of the output}
\label{sec:user:customizingoutput}


\subsubsection{\chcommand{setaddedmarkup}}
\DescribeMacro{\setaddedmarkup}

The command \chcommand{setaddedmarkup} defines the layout of added text.
The default markup is colored text, or the markup set with the option \choption{markup} resp.\ \choption{addedmarkup}.

Values for definition: any \LaTeX-commands, added text can be used with "\#1".

\input{userdoc/command_setaddedmarkup}


\subsubsection{\chcommand{setdeletedmarkup}}
\DescribeMacro{\setdeletedmarkup}

The command \chcommand{setdeletedmarkup} defines the layout of deleted text.
The default markup is striked-out, or the markup set with the option \choption{markup} resp.\ \choption{deletedmarkup}.

Values for definition: any \LaTeX-commands, deleted0 text can be used with "\#1".

\input{userdoc/command_setdeletedmarkup}


\subsubsection{\chcommand{setauthormarkup}}
\DescribeMacro{\setauthormarkup}

The command \chcommand{setauthormarkup} defines the layout of the author's markup in the text.
The default markup is a superscripted author's text.

Values for definition: any \LaTeX-commands, author's text can be used with "\#1".

\input{userdoc/command_setauthormarkup}


\subsubsection{\chcommand{setauthormarkupposition}}
\DescribeMacro{\setauthormarkupposition}

The command \chcommand{setauthormarkupposition} defines the position of the author's markup relative to the changed text.
The default position is right of the changed text.

Possible values: \emph{left} == left of the changes; all other values: right

\input{userdoc/command_setauthormarkupposition}


\subsubsection{\chcommand{setauthormarkuptext}}
\DescribeMacro{\setauthormarkuptext}

The command \chcommand{setauthormarkuptext} defines the text for the author's markup.
The default markup is the author's id.

Possible values: \emph{name} == author's name; all other values: author's id

\input{userdoc/command_setauthormarkuptext}


\subsubsection{\chcommand{setremarkmarkup}}
\DescribeMacro{\setremarkmarkup}

The command \chcommand{setremarkmarkup} defines the layout of remarks in the text.
The default markup typesets the remark in a footnote.

Values for definition: any \LaTeX-commands, author's id can be used with "\#1", the remark can be shown using "\#2".
Using the author's id you can use the author's color with \texttt{Changes@Color\#1}.

\input{userdoc/command_setremarkmarkup}


\subsubsection{\chcommand{setlocextension}}
\DescribeMacro{\setlocextension}

The command \chcommand{setlocextension} sets the extension of the auxiliary file for the list of changes (loc-file\footnote{%
	``loc'' stands for ``list of changes''.
}).
The default extension is ``\texttt{loc}''.
In the example stated below, the loc-file for ``\texttt{foo.tex}'' would be named ``\texttt{foo.changes}'' instead of the default name ``\texttt{foo.loc}''.

\input{userdoc/command_setlocextension}


%^^A ---- other
\subsection{Other new commands}
\label{sec:user:other}

\subsubsection{\chcommand{textsubscript}}
\DescribeMacro{\textsubscript}

\LaTeX\ provides the command \chcommand{textsuperscript}, but not it's counterpart \chcommand{textsubscript}.
If the command is not defined yet, it will be provided by the \chpackage{changes}-package.
If the command is defined yet, it will not be changed.
\begin{chusage}
		\>\chcommand{textsubscript\{\meta{text}\}}\\
	\usageexample
		\>\texttt{This is a \chcommand{textsubscript\{subscript\}} text.}\\
		\>This is a \textsubscript{subscript} text.
\end{chusage}


%^^A -- packages
\subsection{Used packages}
\label{sec:user:packages}

The \chpackage{changes}-package uses already existing packages for it's functions.
You will find detailed description of the packages in their distributions.

The following packages are required always and have to be installed for the \chpackage{changes}-package:
\begin{description}
	\item [xifthen] provides an enhanced \chcommand{if}-command as well as a \texttt{while}-loop
	\item [xkeyval] provides options with key-value-pairs
\end{description}

The following packages are required sometimes and have to be installed if used by the corresponding option:
\begin{description}
	\item [pdfcolmk] loaded if colored text is used for markup (default markup); solves the problem of colored text and page breaks (with pdflatex)
	\item [ulem] loaded if text has to be striked or exed out (default markup)
	\item [xcolor] loaded if colored text is used for markup (default markup)
\end{description}


%^^A -- Authors -------------------------------------------------------------
\section{Authors}
\label{sec:authors}

Several authors contributed to the \chpackage{changes}.
The authors are (in alphabetical order):
\input{userdoc/authors}


%^^A -- Versions -------------------------------------------------------------
\section{Versions}
\label{sec:versions}

\minisec{Version 0.6.0}

Date: 2011/0?/??
\begin{itemize}
	\item Italian translations of captions by Daniele Giovannini
	\item redefined user interface for setting options and definitions of markup and authors
	\item restructuring and code improvement
	\item improved documentation including typical use case
	\item example files for all options and commands
	\item remarks are by default not colored anymore
\end{itemize}

\minisec{Version 0.5.4}

Date: 2011/04/25
\begin{itemize}
	\item extraction of user documentation in separate file
	\item default language changed to English
	\item new script for removal of \chpackage{changes} commands by Silvano Chiaradonna
\end{itemize}

\minisec{Version 0.5.3}

Date: 2010/11/22
\begin{itemize}
	\item document options of \chcommand{documentclass} are used too (suggestion and code of Steve Wolter)
\end{itemize}

\minisec{Version 0.5.2}

Date: 2007/10/10
\begin{itemize}
	\item package options for \chpackage{ulem} and \chpackage{xcolor} are passed to the packages
\end{itemize}

\minisec{Version 0.5.1}

Date: 2007/08/27
\begin{itemize}
	\item deleted text is striked out again using package \chpackage{ulem}, greying didn't work
\end{itemize}

\minisec{Version 0.5}

Date: 2007/08/26
\begin{itemize}
	\item no usage of package \chpackage{arrayjob} anymore, thus no errors using package \chpackage{array}
	\item switch to UTF-8-encoding
	\item no usage of package \chpackage{soul} anymore, thus no errors using UTF-8-encoding
	\item markup for deleted text changed to gray background, because there's no possibility to conveniently strikeout UTF-8-text
	\item new optional argument for author's name
	\item colored list of changes
	\item changed loc file format
	\item improved English documentation
\end{itemize}

\minisec{Version 0.4}

Date: 2007/01/24
\begin{itemize}
	\item included \chpackage{pdfcolmk} to solve problem with colored text and page breaks
	\item extended \chcommand{setremarkmarkup} with author's id for using color in remarks
	\item remarks are by default colored now
	\item first version uploaded to CTAN
\end{itemize}

\minisec{Version 0.3}

Date: 2007/01/22
\begin{itemize}
	\item English user-documentation
	\item replaced command \chcommand{changed} with \chcommand{replaced}
	\item improved \choption{final}-option: no additional space
\end{itemize}

\minisec{Version 0.2}

Date: 2007/01/17
\begin{itemize}
	\item defined loc-names when missing \chpackage{babel}-package
	\item new commands \chcommand{setauthormarkup}, \chcommand{setlocextension}, \chcommand{setremarkmarkup}
	\item generated examples
	\item inserted LPPL
\end{itemize}
Bugfixes
\begin{itemize}
	\item fixed wrong \chpackage{ifthen} package placement
	\item fixed error in loc, always showing ``added''
	\item fixed authormarkup (\chcommand{if}-condition not bugfree)
\end{itemize}

\minisec{Version 0.1}

Date: 2007/01/16
\begin{itemize}
	\item initial version
	\item commands \chcommand{added}, \chcommand{deleted}, and \chcommand{changed}
\end{itemize}


%^^A ---- copyright, license
\section{Distribution, Copyright, License}

\input{userdoc/copyright}

This work may be distributed and/or modified under the conditions of the \LaTeX\ Project Public License, either version~1.3 of this license or any later version.
The latest version of this license is in \url{http://www.latex-project.org/lppl.txt} and version~1.3 or later is part of all distributions of \LaTeX\ version 2005/12/01 or later.

This work has the LPPL maintenance status ``maintained''.
The current maintainer of this work is Ekkart Kleinod.

This work consists of the files

\input{userdoc/files_original}

and the derived files

\input{userdoc/files_generated}

%^^A end of user documentation

